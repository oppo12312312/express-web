(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-qrCode-qrCode"],{"0b34":function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-view",[n("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt"},[n("v-uni-form",[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("维保类型")]),n("v-uni-radio-group",{attrs:{name:"radio"},on:{change:function(i){i=t.$handleEvent(i),t.radioChange(i)}}},[n("v-uni-label",[n("v-uni-radio",{attrs:{value:"1",checked:"1"===t.radioValue}}),t._v("添加设备")],1),n("v-uni-label",[n("v-uni-radio",{attrs:{value:"2",checked:"2"===t.radioValue}}),t._v("维修维保")],1)],1)],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("设备编号")]),n("v-uni-input",{staticClass:"uni-input",attrs:{name:"input",disabled:t.disabled},model:{value:t.termCode,callback:function(i){t.termCode=i},expression:"termCode"}}),n("v-uni-view",{staticClass:"recode",on:{click:function(i){i=t.$handleEvent(i),t.scanCode(i)}}},[t._v("重新扫码")])],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"2"===t.radioValue,expression:"radioValue === '2'"}]},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("下单日期")]),n("v-uni-picker",{attrs:{mode:"date",value:t.date},on:{change:function(i){i=t.$handleEvent(i),t.bindDateChange(i)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))])],1)],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("服务类型")]),n("v-uni-view",{staticClass:"uni-list"},[n("v-uni-view",{staticClass:"uni-list-cell"},[n("v-uni-view",{staticClass:"uni-list-cell-left"},[t._v("当前选择")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("v-uni-picker",{attrs:{value:t.index,range:t.array},on:{change:function(i){i=t.$handleEvent(i),t.bindPickerChange(i)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.array[t.index]))])],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("维保位置")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("checkLocation",{ref:"checkLocation1"})],1)],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"1"===t.radioValue,expression:"radioValue === '1'"}]},[n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("位置")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("checkLocation",{ref:"checkLocation2"})],1)],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("传感器编码")]),n("v-uni-input",{staticClass:"uni-input",attrs:{name:"input"},model:{value:t.code,callback:function(i){t.code=i},expression:"code"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("传感器名称")]),n("v-uni-input",{staticClass:"uni-input",attrs:{name:"input"},model:{value:t.name,callback:function(i){t.name=i},expression:"name"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("传感器说明")]),n("v-uni-input",{staticClass:"uni-input",attrs:{name:"input"},model:{value:t.info,callback:function(i){t.info=i},expression:"info"}})],1),n("v-uni-view",{staticClass:"uni-form-item uni-column"},[n("v-uni-view",{staticClass:"title"},[t._v("传感器类型")]),n("v-uni-view",{staticClass:"uni-list"},[n("v-uni-view",{staticClass:"uni-list-cell"},[n("v-uni-view",{staticClass:"uni-list-cell-left"},[t._v("当前选择")]),n("v-uni-view",{staticClass:"uni-list-cell-db"},[n("v-uni-picker",{attrs:{value:t.advIndex,range:t.optAdvType},on:{change:function(i){i=t.$handleEvent(i),t.advChange(i)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.optAdvType[t.advIndex]))])],1)],1)],1)],1)],1)],1)],1),n("v-uni-button",{staticClass:"bu",attrs:{type:"primary"},on:{click:function(i){i=t.$handleEvent(i),t.enter(i)}}},[t._v("确认")])],1)],1)},a=[];n.d(i,"a",function(){return e}),n.d(i,"b",function(){return a})},"137b":function(t,i,n){"use strict";function e(t){if("number"!==typeof t||t<0)return t;var i=parseInt(t/3600);t%=3600;var n=parseInt(t/60);t%=60;var e=t;return[i,n,e].map(function(t){return t=t.toString(),t[1]?t:"0"+t}).join(":")}function a(t,i){return"string"===typeof t&&"string"===typeof i&&(t=parseFloat(t),i=parseFloat(i)),t=t.toFixed(2),i=i.toFixed(2),{longitude:t.toString().split("."),latitude:i.toString().split(".")}}var u=function(t){return t<10?"0"+t:t},o={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(t){var i="";for(var n in this.UNITS)if(t>=this.UNITS[n]){i=Math.floor(t/this.UNITS[n])+n+"前";break}return i||"刚刚"},format:function(t){var i=this.parse(t),n=Date.now()-i.getTime();return n<this.UNITS["天"]?this.humanize(n):i.getFullYear()+"/"+u(i.getMonth()+1)+"/"+u(i.getDay())+"-"+u(i.getHours())+":"+u(i.getMinutes())},formatNow:function(){var t=new Date;return t.getFullYear()+"-"+u(t.getMonth()+1)+"-"+u(t.getDate())+" "+u(t.getHours())+":"+u(t.getMinutes())},formatNowDate:function(){var t=new Date;return t.getFullYear()+"-"+u(t.getMonth()+1)+"-"+u(t.getDate())},parse:function(t){var i=t.split(/[^0-9]/);return new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])}};t.exports={formatTime:e,formatLocation:a,dateUtils:o}},"282f":function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-picker",{attrs:{mode:"multiSelector",value:t.multiIndex,range:t.multiArray},on:{change:function(i){i=t.$handleEvent(i),t.change(i)},columnchange:function(i){i=t.$handleEvent(i),t.bindMultiPickerColumnChange(i)}}},[n("v-uni-view",{staticClass:"ov-hi uni-input"},[t._v(t._s(t.multiArray[0][t.multiIndex[0]])+"，"+t._s(t.multiArray[1][t.multiIndex[1]])+"，"+t._s(t.multiArray[2][t.multiIndex[2]]))])],1)},a=[];n.d(i,"a",function(){return e}),n.d(i,"b",function(){return a})},"422f":function(t,i,n){"use strict";var e=n("efeb"),a=n.n(e);a.a},7873:function(t,i,n){"use strict";n.r(i);var e=n("ad18"),a=n.n(e);for(var u in e)"default"!==u&&function(t){n.d(i,t,function(){return e[t]})}(u);i["default"]=a.a},"794c":function(t,i,n){"use strict";n.r(i);var e=n("0b34"),a=n("b352");for(var u in a)"default"!==u&&function(t){n.d(i,t,function(){return a[t]})}(u);n("422f");var o=n("2877"),r=Object(o["a"])(a["default"],e["a"],e["b"],!1,null,"6ba4f474",null);i["default"]=r.exports},"9a69":function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e=u(n("d2a8")),a=u(n("137b"));function u(t){return t&&t.__esModule?t:{default:t}}var o={components:{checkLocation:e.default},data:function(){return{radioValue:"1",termCode:"",index:1,date:"",disabled:!1,code:"",name:"",info:"",array:["类型1","类型2","类型3"],advIndex:0,optAdvType:[]}},methods:{onShow:function(){this.radioValue="1",this.termCode="",this.index=1,this.disabled=!1,this.code="",this.info="",this.name="",this.advIndex=0,this.date=a.default.dateUtils.formatNowDate(),this.$refs.checkLocation1&&(this.$refs.checkLocation1.init(),this.$refs.checkLocation2.init()),this.scanCode(),this.getAdvType()},advChange:function(t){this.advIndex=t.target.value},bindDateChange:function(t){this.date=t.target.value},radioChange:function(t){this.radioValue=t.target.value},getAdvType:function(){var t=this;this.$service.qrCode.findTermTypeAll().then(function(i){t.optAdvType=[],i.msg.forEach(function(i){i.termTypeName&&t.optAdvType.push(i.termTypeName)})})},scanCode:function(){var t=this;uni.scanCode({success:function(i){t.disabled=!0,t.termCode=i.result}})},enter:function(){this.$service.qrCode.addTerminalrepair({termCode:this.termCode}).then(function(t){uni.showModal({content:t.msg,showCancel:!1})})}}};i.default=o},ad18:function(t,i,n){"use strict";function e(t){return o(t)||u(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(t){if(Array.isArray(t)){for(var i=0,n=new Array(t.length);i<t.length;i++)n[i]=t[i];return n}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r={name:"checkLocation",data:function(){return{multiIndex:[0,0,0],multiArray:[["全部项目"],["全部建筑"],["全部楼层"]],multiValue:[[],[],[]],all:["全部项目","全部建筑","全部楼层"]}},computed:{orgId:function(){return uni.getStorageSync("userInfo").depInfo.orgId}},mounted:function(){this.load()},methods:{load:function(){this.initAll(),this.getProject()},init:function(){this.multiIndex=[0,0,0]},initAll:function(){for(var t=0;t<this.multiArray.length;t++)this.multiArray[t]=[this.all[t]]},getProject:function(){var t=this;this.$service.cnsmogsensor.findProjectSelect({orgId:this.orgId}).then(function(i){t.initProject(i.msg||[]),t.$forceUpdate()})},initProject:function(t){var i=t.map(function(t){return t.projectName});this.multiArray[0]=[this.all[0]].concat(e(i));var n=t.map(function(t){return t.projectId});this.multiValue[0]=[null].concat(e(n))},getBuilding:function(t){var i=this;this.$service.cnsmogsensor.findStrucunitSelect({projectId:t}).then(function(n){i.initBuilding(null!==t?n.msg:[]),i.initFloor([]),i.$forceUpdate()})},initBuilding:function(t){var i=t.map(function(t){return t.strucunitName});this.multiArray.splice(1,1,[this.all[1]].concat(e(i)));var n=t.map(function(t){return t.strucunitId});this.multiIndex[1]=0,this.multiIndex[2]=0,this.multiValue[1]=[null].concat(e(n))},getFloor:function(t){var i=this;this.$service.cnsmogsensor.findCrosssectionSelect({strucunitId:t}).then(function(n){i.initFloor(null!==t?n.msg:[]),i.$forceUpdate()})},initFloor:function(t){var i=t.map(function(t){return t.crossSectionName});this.multiArray.splice(2,1,[this.all[2]].concat(e(i)));var n=t.map(function(t){return t.crossSectionId});this.multiIndex[2]=0,this.multiValue[2]=[null].concat(e(n))},bindMultiPickerColumnChange:function(t){console.log("修改的列为："+t.detail.column+"，值为："+t.detail.value),this.multiIndex.splice(t.detail.column,1,t.detail.value);var i=this.multiValue[t.detail.column][t.detail.value];0===t.detail.column&&this.getBuilding(i),1===t.detail.column&&this.getFloor(i)},change:function(){for(var t=[],i=0;i<3;i++)t.push(this.multiValue[i][this.multiIndex[i]]);this.$emit("change",t)}}};i.default=r},b352:function(t,i,n){"use strict";n.r(i);var e=n("9a69"),a=n.n(e);for(var u in e)"default"!==u&&function(t){n.d(i,t,function(){return e[t]})}(u);i["default"]=a.a},b3b3:function(t,i,n){i=t.exports=n("2350")(!1),i.push([t.i,"uni-page-body[data-v-6ba4f474]{background-color:#f4f5f6}.uni-form-item .title[data-v-6ba4f474]{padding:10px 0}.bu[data-v-6ba4f474]{margin-top:%?20?%;margin-bottom:%?40?%}.recode[data-v-6ba4f474]{color:#007aff;margin-top:%?10?%}body.?%PAGE?%[data-v-6ba4f474]{background-color:#f4f5f6}",""])},d2a8:function(t,i,n){"use strict";n.r(i);var e=n("282f"),a=n("7873");for(var u in a)"default"!==u&&function(t){n.d(i,t,function(){return a[t]})}(u);var o=n("2877"),r=Object(o["a"])(a["default"],e["a"],e["b"],!1,null,"125320ec",null);i["default"]=r.exports},efeb:function(t,i,n){var e=n("b3b3");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=n("4f06").default;a("6ee4c155",e,!0,{sourceMap:!1,shadowMode:!1})}}]);